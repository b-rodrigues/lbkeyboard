<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Composable Rules System • lbkeyboard</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Composable Rules System">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lbkeyboard</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started with lbkeyboard</a></li>
    <li><a class="dropdown-item" href="../articles/luxembourg-optimization.html">Optimizing Keyboard Layouts for Luxembourg</a></li>
    <li><a class="dropdown-item" href="../articles/rules-system.html">Composable Rules System</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Composable Rules System</h1>
            
      

      <div class="d-none name"><code>rules-system.Rmd</code></div>
    </div>

    
    
<p>The lbkeyboard package includes a <strong>composable rules
system</strong> that lets you customize the keyboard optimization with
constraints and preferences. Rules can be combined freely to express
complex requirements.</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://b-rodrigues.github.io/lbkeyboard">lbkeyboard</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"french"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="types-of-rules">Types of Rules<a class="anchor" aria-label="anchor" href="#types-of-rules"></a>
</h2>
<p>There are two types of rules:</p>
<table class="table">
<thead><tr class="header">
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Hard constraints</strong></td>
<td>Keys cannot move from their position</td>
</tr>
<tr class="even">
<td><strong>Soft preferences</strong></td>
<td>Penalty added when preference is violated</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="hard-constraints">Hard Constraints<a class="anchor" aria-label="anchor" href="#hard-constraints"></a>
</h3>
<div class="section level4">
<h4 id="fix_keys---lock-keys-in-place">
<code>fix_keys()</code> - Lock Keys in Place<a class="anchor" aria-label="anchor" href="#fix_keys---lock-keys-in-place"></a>
</h4>
<p>Use <code><a href="../reference/fix_keys.html">fix_keys()</a></code> to prevent certain keys from moving
during optimization. This is useful for preserving keyboard
shortcuts:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Keep Ctrl+Z, Ctrl+X, Ctrl+C, Ctrl+V shortcuts</span></span>
<span><span class="va">rule</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fix_keys.html">fix_keys</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>, <span class="st">"v"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rule</span><span class="op">)</span></span>
<span><span class="co">#&gt; Layout Rule: fix </span></span>
<span><span class="co">#&gt;   Fixed keys: z, x, c, v</span></span></code></pre></div>
<p>Keys are matched case-insensitively:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># These are equivalent</span></span>
<span><span class="fu"><a href="../reference/fix_keys.html">fix_keys</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Layout Rule: fix </span></span>
<span><span class="co">#&gt;   Fixed keys: a, b</span></span>
<span><span class="fu"><a href="../reference/fix_keys.html">fix_keys</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Layout Rule: fix </span></span>
<span><span class="co">#&gt;   Fixed keys: a, b</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="soft-preferences">Soft Preferences<a class="anchor" aria-label="anchor" href="#soft-preferences"></a>
</h3>
<p>Soft preferences add a penalty to the effort score when not
satisfied. The <strong>weight</strong> parameter controls how strongly
the preference is enforced.</p>
<div class="section level4">
<h4 id="prefer_hand---hand-placement-preference">
<code>prefer_hand()</code> - Hand Placement Preference<a class="anchor" aria-label="anchor" href="#prefer_hand---hand-placement-preference"></a>
</h4>
<p>Specify which keys should go on which hand:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Put vowels on the left hand</span></span>
<span><span class="va">rule</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prefer_hand.html">prefer_hand</a></span><span class="op">(</span></span>
<span>  keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"e"</span>, <span class="st">"i"</span>, <span class="st">"o"</span>, <span class="st">"u"</span><span class="op">)</span>,</span>
<span>  hand <span class="op">=</span> <span class="st">"left"</span>,</span>
<span>  weight <span class="op">=</span> <span class="fl">2.0</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rule</span><span class="op">)</span></span>
<span><span class="co">#&gt; Layout Rule: prefer_hand </span></span>
<span><span class="co">#&gt;   Keys: a, e, i, o, u -&gt;  left hand (weight: 2 )</span></span></code></pre></div>
<p>This adds a penalty of 2.0 for each vowel that ends up on the right
hand.</p>
</div>
<div class="section level4">
<h4 id="prefer_row---row-placement-preference">
<code>prefer_row()</code> - Row Placement Preference<a class="anchor" aria-label="anchor" href="#prefer_row---row-placement-preference"></a>
</h4>
<p>Specify which row keys should be placed on:</p>
<ul>
<li>Row 1 = Top row (QWERTY row)</li>
<li>Row 2 = Home row (ASDF row)</li>
<li>Row 3 = Bottom row (ZXCV row)</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Put the most common English letters on home row</span></span>
<span><span class="va">common_letters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="st">"t"</span>, <span class="st">"a"</span>, <span class="st">"o"</span>, <span class="st">"i"</span>, <span class="st">"n"</span>, <span class="st">"s"</span>, <span class="st">"r"</span><span class="op">)</span></span>
<span><span class="va">rule</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prefer_row.html">prefer_row</a></span><span class="op">(</span><span class="va">common_letters</span>, row <span class="op">=</span> <span class="fl">2</span>, weight <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rule</span><span class="op">)</span></span>
<span><span class="co">#&gt; Layout Rule: prefer_row </span></span>
<span><span class="co">#&gt;   Keys: e, t, a, o, i, n, s, r -&gt; row 2 (weight: 1.5 )</span></span></code></pre></div>
<p>The penalty is proportional to the distance from the target row.</p>
</div>
<div class="section level4">
<h4 id="balance_hands---hand-usage-balance">
<code>balance_hands()</code> - Hand Usage Balance<a class="anchor" aria-label="anchor" href="#balance_hands---hand-usage-balance"></a>
</h4>
<p>Aim for balanced typing load between hands:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Target 50% left, 50% right</span></span>
<span><span class="va">rule</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/balance_hands.html">balance_hands</a></span><span class="op">(</span>target <span class="op">=</span> <span class="fl">0.5</span>, weight <span class="op">=</span> <span class="fl">1.0</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rule</span><span class="op">)</span></span>
<span><span class="co">#&gt; Layout Rule: balance_hands </span></span>
<span><span class="co">#&gt;   Target: 50 % left hand (weight: 1 )</span></span>
<span></span>
<span><span class="co"># Or slight preference for right hand (40% left, 60% right)</span></span>
<span><span class="va">rule_right</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/balance_hands.html">balance_hands</a></span><span class="op">(</span>target <span class="op">=</span> <span class="fl">0.4</span>, weight <span class="op">=</span> <span class="fl">1.0</span><span class="op">)</span></span></code></pre></div>
<p>The penalty increases quadratically as the actual balance deviates
from target.</p>
</div>
<div class="section level4">
<h4 id="keep_like---match-reference-layout">
<code>keep_like()</code> - Match Reference Layout<a class="anchor" aria-label="anchor" href="#keep_like---match-reference-layout"></a>
</h4>
<p>Keep specified keys in similar positions to a reference layout:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Keep bottom row like QWERTY</span></span>
<span><span class="va">rule</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/keep_like.html">keep_like</a></span><span class="op">(</span></span>
<span>  reference <span class="op">=</span> <span class="st">"qwerty"</span>,</span>
<span>  keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>, <span class="st">"v"</span>, <span class="st">"b"</span>, <span class="st">"n"</span>, <span class="st">"m"</span><span class="op">)</span>,</span>
<span>  weight <span class="op">=</span> <span class="fl">3.0</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rule</span><span class="op">)</span></span>
<span><span class="co">#&gt; Layout Rule: keep_like </span></span>
<span><span class="co">#&gt;   Match reference for: z, x, c, v, b, n, m (weight: 3 )</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="combining-rules">Combining Rules<a class="anchor" aria-label="anchor" href="#combining-rules"></a>
</h2>
<p>The real power comes from combining multiple rules. Pass a list of
rules to <code><a href="../reference/optimize_layout.html">optimize_layout()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_layout.html">optimize_layout</a></span><span class="op">(</span></span>
<span>  text_samples <span class="op">=</span> <span class="va">french</span>,</span>
<span>  rules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Hard: keep shortcut keys fixed</span></span>
<span>    <span class="fu"><a href="../reference/fix_keys.html">fix_keys</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>, <span class="st">"v"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Soft: vowels on left hand</span></span>
<span>    <span class="fu"><a href="../reference/prefer_hand.html">prefer_hand</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"e"</span>, <span class="st">"i"</span>, <span class="st">"o"</span>, <span class="st">"u"</span><span class="op">)</span>, <span class="st">"left"</span>, weight <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Soft: common letters on home row</span></span>
<span>    <span class="fu"><a href="../reference/prefer_row.html">prefer_row</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="st">"t"</span>, <span class="st">"a"</span>, <span class="st">"o"</span>, <span class="st">"n"</span>, <span class="st">"i"</span>, <span class="st">"s"</span>, <span class="st">"r"</span><span class="op">)</span>, <span class="fl">2</span>, weight <span class="op">=</span> <span class="fl">1.0</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Soft: aim for balanced hands</span></span>
<span>    <span class="fu"><a href="../reference/balance_hands.html">balance_hands</a></span><span class="op">(</span><span class="fl">0.5</span>, weight <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  generations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: input string 'é' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning: input string 'è' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning: input string 'ä' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning: input string 'ü' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning: input string 'é' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning: input string 'è' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning: input string 'ä' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning: input string 'ü' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Au commencement, Dieu créa les cieux et la terre.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'La terre était informe et vide: il y avait des ténèbres à la</span></span>
<span><span class="co">#&gt; surface de l'abîme, et l'esprit de Dieu se mouvait au-dessus des eaux.' cannot</span></span>
<span><span class="co">#&gt; be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu dit: Que la lumière soit! Et la lumière fut.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu vit que la lumière était bonne; et Dieu sépara la lumière</span></span>
<span><span class="co">#&gt; d'avec les ténèbres.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but</span></span>
<span><span class="co">#&gt; is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu appela la lumière jour, et il appela les ténèbres nuit.</span></span>
<span><span class="co">#&gt; Ainsi, il y eut un soir, et il y eut un matin: ce fut le premier jour.' cannot</span></span>
<span><span class="co">#&gt; be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu dit: Qu'il y ait une étendue entre les eaux, et qu'elle</span></span>
<span><span class="co">#&gt; sépare les eaux d'avec les eaux.' cannot be translated from 'ANSI_X3.4-1968' to</span></span>
<span><span class="co">#&gt; UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Et Dieu fit l'étendue, et il sépara les eaux qui sont</span></span>
<span><span class="co">#&gt; au-dessous de l'étendue d'avec les eaux qui sont au-dessus de l'étendue. Et</span></span>
<span><span class="co">#&gt; cela fut ainsi.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu appela l'étendue ciel. Ainsi, il y eut un soir, et il y</span></span>
<span><span class="co">#&gt; eut un matin: ce fut le second jour.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu appela le sec terre, et il appela l'amas des eaux mers.</span></span>
<span><span class="co">#&gt; Dieu vit que cela était bon.' cannot be translated from 'ANSI_X3.4-1968' to</span></span>
<span><span class="co">#&gt; UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Puis Dieu dit: Que la terre produise de la verdure, de l'herbe</span></span>
<span><span class="co">#&gt; portant de la semence, des arbres fruitiers donnant du fruit selon leur espèce</span></span>
<span><span class="co">#&gt; et ayant en eux leur semence sur la terre. Et cela fut ainsi.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'La terre produisit de la verdure, de l'herbe portant de la</span></span>
<span><span class="co">#&gt; semence selon son espèce, et des arbres donnant du fruit et ayant en eux leur</span></span>
<span><span class="co">#&gt; semence selon leur espèce. Dieu vit que cela était bon.' cannot be translated</span></span>
<span><span class="co">#&gt; from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Ainsi, il y eut un soir, et il y eut un matin: ce fut le</span></span>
<span><span class="co">#&gt; troisième jour.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu dit: Qu'il y ait des luminaires dans l'étendue du ciel,</span></span>
<span><span class="co">#&gt; pour séparer le jour d'avec la nuit; que ce soient des signes pour marquer les</span></span>
<span><span class="co">#&gt; époques, les jours et les années;' cannot be translated from 'ANSI_X3.4-1968'</span></span>
<span><span class="co">#&gt; to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'et qu'ils servent de luminaires dans l'étendue du ciel, pour</span></span>
<span><span class="co">#&gt; éclairer la terre. Et cela fut ainsi.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu fit les deux grands luminaires, le plus grand luminaire</span></span>
<span><span class="co">#&gt; pour présider au jour, et le plus petit luminaire pour présider à la nuit; il</span></span>
<span><span class="co">#&gt; fit aussi les étoiles.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu les plaça dans l'étendue du ciel, pour éclairer la terre,'</span></span>
<span><span class="co">#&gt; cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'pour présider au jour et à la nuit, et pour séparer la lumière</span></span>
<span><span class="co">#&gt; d'avec les ténèbres. Dieu vit que cela était bon.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Ainsi, il y eut un soir, et il y eut un matin: ce fut le</span></span>
<span><span class="co">#&gt; quatrième jour.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu dit: Que les eaux produisent en abondance des animaux</span></span>
<span><span class="co">#&gt; vivants, et que des oiseaux volent sur la terre vers l'étendue du ciel.' cannot</span></span>
<span><span class="co">#&gt; be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu créa les grands poissons et tous les animaux vivants qui</span></span>
<span><span class="co">#&gt; se meuvent, et que les eaux produisirent en abondance selon leur espèce; il</span></span>
<span><span class="co">#&gt; créa aussi tout oiseau ailé selon son espèce. Dieu vit que cela était bon.'</span></span>
<span><span class="co">#&gt; cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu les bénit, en disant: Soyez féconds, multipliez, et</span></span>
<span><span class="co">#&gt; remplissez les eaux des mers; et que les oiseaux multiplient sur la terre.'</span></span>
<span><span class="co">#&gt; cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Ainsi, il y eut un soir, et il y eut un matin: ce fut le</span></span>
<span><span class="co">#&gt; cinquième jour.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu dit: Que la terre produise des animaux vivants selon leur</span></span>
<span><span class="co">#&gt; espèce, du bétail, des reptiles et des animaux terrestres, selon leur espèce.</span></span>
<span><span class="co">#&gt; Et cela fut ainsi.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu fit les animaux de la terre selon leur espèce, le bétail</span></span>
<span><span class="co">#&gt; selon son espèce, et tous les reptiles de la terre selon leur espèce. Dieu vit</span></span>
<span><span class="co">#&gt; que cela était bon.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but</span></span>
<span><span class="co">#&gt; is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Puis Dieu dit: Faisons l'homme à notre image, selon notre</span></span>
<span><span class="co">#&gt; ressemblance, et qu'il domine sur les poissons de la mer, sur les oiseaux du</span></span>
<span><span class="co">#&gt; ciel, sur le bétail, sur toute la terre, et sur tous les reptiles qui rampent</span></span>
<span><span class="co">#&gt; sur la terre.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu créa l'homme à son image, il le créa à l'image de Dieu, il</span></span>
<span><span class="co">#&gt; créa l'homme et la femme.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu les bénit, et Dieu leur dit: Soyez féconds, multipliez,</span></span>
<span><span class="co">#&gt; remplissez la terre, et l'assujettissez; et dominez sur les poissons de la mer,</span></span>
<span><span class="co">#&gt; sur les oiseaux du ciel, et sur tout animal qui se meut sur la terre.' cannot</span></span>
<span><span class="co">#&gt; be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Et Dieu dit: Voici, je vous donne toute herbe portant de la</span></span>
<span><span class="co">#&gt; semence et qui est à la surface de toute la terre, et tout arbre ayant en lui</span></span>
<span><span class="co">#&gt; du fruit d'arbre et portant de la semence: ce sera votre nourriture.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Et à tout animal de la terre, à tout oiseau du ciel, et à tout</span></span>
<span><span class="co">#&gt; ce qui se meut sur la terre, ayant en soi un souffle de vie, je donne toute</span></span>
<span><span class="co">#&gt; herbe verte pour nourriture. Et cela fut ainsi.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Dieu vit tout ce qu'il avait fait et voici, cela était très</span></span>
<span><span class="co">#&gt; bon. Ainsi, il y eut un soir, et il y eut un matin: ce fut le sixième jour.'</span></span>
<span><span class="co">#&gt; cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Joe Paterno, né le 21 décembre 1926 à Brooklyn et mort le 22</span></span>
<span><span class="co">#&gt; janvier 2012 à State College, est un joueur et entraîneur américain de football</span></span>
<span><span class="co">#&gt; américain universitaire. Figure historique et emblématique des Nittany Lions de</span></span>
<span><span class="co">#&gt; Penn State entre 1966 et 2011, il est l'entraîneur le plus victorieux de</span></span>
<span><span class="co">#&gt; l'histoire du football américain universitaire avec 409 succès en Division I.</span></span>
<span><span class="co">#&gt; Son image est toutefois ternie en fin de carrière à cause de soupçons de</span></span>
<span><span class="co">#&gt; négligence dans une affaire d'agressions sexuelles sur mineurs.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Lors de ses brillantes études de droit à l'université Brown,</span></span>
<span><span class="co">#&gt; Joe Paterno joue au football américain et est entraîné par Rip Engle. Ce</span></span>
<span><span class="co">#&gt; dernier, embauché par l'université de Penn State, le recrute comme entraîneur</span></span>
<span><span class="co">#&gt; assistant en 1950. Pendant quinze saisons, l'assistant fait ses preuves avant</span></span>
<span><span class="co">#&gt; de devenir entraîneur principal des Nittany Lions en 1965. Surnommé JoePa, il</span></span>
<span><span class="co">#&gt; connaît rapidement le succès. Invaincu en 1968 et 1969, il est désiré par</span></span>
<span><span class="co">#&gt; plusieurs franchises de la National Football League (NFL), mais refuse pour</span></span>
<span><span class="co">#&gt; conserver son rôle d'éducateur. Entraîneur de l'équipe universitaire championne</span></span>
<span><span class="co">#&gt; en 1982 et 1986, vainqueur des quatre principaux Bowls universitaires, il</span></span>
<span><span class="co">#&gt; intègre le College Football Hall of Fame en 2007 alors qu'il est encore en</span></span>
<span><span class="co">#&gt; activité, un accomplissement rare.' cannot be translated from 'ANSI_X3.4-1968'</span></span>
<span><span class="co">#&gt; to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Reconnu pour ses succès sportifs, académiques et son</span></span>
<span><span class="co">#&gt; exemplarité, JoePa est adulé comme une icône populaire dans la région de State</span></span>
<span><span class="co">#&gt; College. Onze jours après avoir célébré sa 409e victoire avec les Lions, il est</span></span>
<span><span class="co">#&gt; démis de ses fonctions à la suite du scandale des agressions sexuelles de</span></span>
<span><span class="co">#&gt; l'Université d'État de Pennsylvanie. Accusé d'avoir couvert les abus sexuels de</span></span>
<span><span class="co">#&gt; Jerry Sandusky, son image est ternie par cette affaire au retentissement</span></span>
<span><span class="co">#&gt; international. Il meurt deux mois plus tard des suites d'un cancer du poumon.'</span></span>
<span><span class="co">#&gt; cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Chacun peut publier immédiatement du contenu en ligne, à</span></span>
<span><span class="co">#&gt; condition de respecter les règles essentielles établies par la Fondation</span></span>
<span><span class="co">#&gt; Wikimedia et par la communauté ; par exemple, la vérifiabilité du contenu,</span></span>
<span><span class="co">#&gt; l'admissibilité des articles et garder une attitude cordiale.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'De nombreuses pages d’aide sont à votre disposition, notamment</span></span>
<span><span class="co">#&gt; pour créer un article, modifier un article ou insérer une image. N’hésitez pas</span></span>
<span><span class="co">#&gt; à poser une question pour être aidé dans vos premiers pas, notamment dans un</span></span>
<span><span class="co">#&gt; des projets thématiques ou dans divers espaces de discussion.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Les pages de discussion servent à centraliser les réflexions et</span></span>
<span><span class="co">#&gt; les remarques permettant d’améliorer les articles.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'En 1894, l’explorateur Gustav Adolf von Götzen suivait les</span></span>
<span><span class="co">#&gt; traces d’un missionnaire en provenance de la cote orientale d’Afrique. Pendant</span></span>
<span><span class="co">#&gt; qu’il se rendait au Rwanda, il découvre un petit village des pécheurs appelé</span></span>
<span><span class="co">#&gt; Ngoma qui traduit signifie tam tam, par déformation il écrivit Goma. Ngoma</span></span>
<span><span class="co">#&gt; devint un poste belge en face de celui de Rubavu (au Rwanda) habité par les</span></span>
<span><span class="co">#&gt; Allemands. Au début, la cohabitation entre ces deux postes n’était pas facile.</span></span>
<span><span class="co">#&gt; À un certain moment, les chefs coutumiers du Rwanda, en complicité avec les</span></span>
<span><span class="co">#&gt; Allemands attaquent les Belges de Goma. Ces derniers se réfugient à Bukavu et</span></span>
<span><span class="co">#&gt; laissent les envahisseurs occuper la ville. Après des négociations, les</span></span>
<span><span class="co">#&gt; Allemands replient vers le Rwanda et les Belges reprennent leur position</span></span>
<span><span class="co">#&gt; initiale comme poste colonial. L’afflux des colonisateurs dans ce village joue</span></span>
<span><span class="co">#&gt; un rôle important dans son évolution pour devenir une grande agglomération. Les</span></span>
<span><span class="co">#&gt; colonisateurs venaient d’installer le chef lieu du [... truncated]</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'En ce moment, Goma reste un poste de transaction lacustre avec</span></span>
<span><span class="co">#&gt; Bukavu qui était une ville minière. Plus tard, Rutshuru, Masisi, Kalehe,</span></span>
<span><span class="co">#&gt; Gisenyi, etc. déverseront leurs populations dans Goma, à la rechercher de</span></span>
<span><span class="co">#&gt; l’emploi au près des colonisateurs. C’est en cette période que vu le jour le</span></span>
<span><span class="co">#&gt; quartier Birere (un bidonville de Goma) autour des entrepôts, bureaux et</span></span>
<span><span class="co">#&gt; habitations des colons. Le nom Birere (littéralement feuilles de bananier)</span></span>
<span><span class="co">#&gt; vient du fait qu’à l’époque, les gens y construisaient en feuilles des</span></span>
<span><span class="co">#&gt; bananiers.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid</span></span>
<span><span class="co">#&gt; UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'La ville est la base arrière de l'opération Turquoise organisée</span></span>
<span><span class="co">#&gt; en 1994 à la fin du génocide rwandais.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'La ville et ses environs abriteront dans des camps autour de</span></span>
<span><span class="co">#&gt; 650 000 réfugiés hutus de 1994 jusqu'à la chute du Zaïre, dont certains</span></span>
<span><span class="co">#&gt; supposés anciens génocidaires. Selon des ONG, l'AFDL procède à des massacres</span></span>
<span><span class="co">#&gt; dans les camps entre 1996 et 19971.' cannot be translated from 'ANSI_X3.4-1968'</span></span>
<span><span class="co">#&gt; to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'De 1998 à 2002/2003, la ville, sous contrôle du Rassemblement</span></span>
<span><span class="co">#&gt; congolais pour la démocratie (RCD) pro-rwandais échappe au contrôle du</span></span>
<span><span class="co">#&gt; gouvernement congolais.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'De nombreux viols, massacres et crimes de guerre y ont été</span></span>
<span><span class="co">#&gt; perpétrés entre 1996 et 2006 par les troupes des généraux rebelles du RCD,</span></span>
<span><span class="co">#&gt; essentiellement sous les généraux Nkundabatware et Mutebusi.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'En 2002, le Nyiragongo entra en éruption, et une coulée de lave</span></span>
<span><span class="co">#&gt; atteignit le centre de la ville. La lave n'a pas atteint le lac Kivu fort</span></span>
<span><span class="co">#&gt; heureusement, en effet ce lac est un lac méromictique et un changement brutal</span></span>
<span><span class="co">#&gt; de chaleur aurait des conséquences graves : Éruption limnique.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = french, rules = list(fix_keys(c("z",</span></span>
<span><span class="co">#&gt; : input string 'Débordant de populations fuyant les violences, Goma compte en</span></span>
<span><span class="co">#&gt; 2012 plus de 400 000 habitants. Ceux qui ne peuvent pas trouver d'abri</span></span>
<span><span class="co">#&gt; remplissent les camps de réfugiés, où l'ONU et les ONG se débattent pour leur</span></span>
<span><span class="co">#&gt; fournir nourriture, eau et combustible.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_layout.html">print_layout</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">layout</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span><span class="co">#&gt; │ U │ J │ Y │ B │ F │ D │ S │ P │ K │ G │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ A │ O │ H │ I │ E │ R │ N │ T │ M │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ Z │ X │ C │ V │ L │ W │ Q │</span></span>
<span><span class="co">#&gt; └───┴───┴───┴───┴───┴───┴───┘</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nImprovement:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">improvement</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Improvement: 27.95 %</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="choosing-weights">Choosing Weights<a class="anchor" aria-label="anchor" href="#choosing-weights"></a>
</h2>
<p>The <strong>weight</strong> parameter determines how strongly each
preference influences the optimization. Here are some guidelines:</p>
<table class="table">
<thead><tr class="header">
<th>Weight</th>
<th>Effect</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0.5 - 1.0</td>
<td>Mild preference, may be overridden</td>
</tr>
<tr class="even">
<td>1.0 - 2.0</td>
<td>Moderate preference</td>
</tr>
<tr class="odd">
<td>2.0 - 5.0</td>
<td>Strong preference</td>
</tr>
<tr class="even">
<td>5.0+</td>
<td>Very strong, almost like a constraint</td>
</tr>
</tbody>
</table>
<p><strong>Tips:</strong></p>
<ul>
<li>Start with weight = 1.0 and adjust based on results</li>
<li>Higher weights can slow convergence</li>
<li>Balance between typing efficiency and your preferences</li>
</ul>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="ergonomic-vowels-layout">Ergonomic Vowels Layout<a class="anchor" aria-label="anchor" href="#ergonomic-vowels-layout"></a>
</h3>
<p>Put vowels on strong fingers of the left hand:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_layout.html">optimize_layout</a></span><span class="op">(</span></span>
<span>  text_samples <span class="op">=</span> <span class="va">french</span>,</span>
<span>  rules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Vowels on left hand</span></span>
<span>    <span class="fu"><a href="../reference/prefer_hand.html">prefer_hand</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"e"</span>, <span class="st">"i"</span>, <span class="st">"o"</span>, <span class="st">"u"</span><span class="op">)</span>, <span class="st">"left"</span>, weight <span class="op">=</span> <span class="fl">3.0</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Common consonants on right hand</span></span>
<span>    <span class="fu"><a href="../reference/prefer_hand.html">prefer_hand</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"t"</span>, <span class="st">"n"</span>, <span class="st">"s"</span>, <span class="st">"r"</span>, <span class="st">"l"</span><span class="op">)</span>, <span class="st">"right"</span>, weight <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Most frequent on home row</span></span>
<span>    <span class="fu"><a href="../reference/prefer_row.html">prefer_row</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="st">"t"</span>, <span class="st">"a"</span>, <span class="st">"n"</span>, <span class="st">"i"</span>, <span class="st">"s"</span><span class="op">)</span>, <span class="fl">2</span>, weight <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  generations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_layout.html">print_layout</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">layout</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span><span class="co">#&gt; │ Z │ H │ K │ O │ V │ L │ C │ X │ G │ D │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ U │ I │ E │ A │ N │ R │ T │ S │ B │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ Y │ F │ W │ P │ J │ Q │ M │</span></span>
<span><span class="co">#&gt; └───┴───┴───┴───┴───┴───┴───┘</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="preserving-familiar-keys">Preserving Familiar Keys<a class="anchor" aria-label="anchor" href="#preserving-familiar-keys"></a>
</h3>
<p>Keep commonly-used keys in familiar positions:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_layout.html">optimize_layout</a></span><span class="op">(</span></span>
<span>  text_samples <span class="op">=</span> <span class="va">french</span>,</span>
<span>  rules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Hard: fix entire bottom row</span></span>
<span>    <span class="fu"><a href="../reference/fix_keys.html">fix_keys</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>, <span class="st">"v"</span>, <span class="st">"b"</span>, <span class="st">"n"</span>, <span class="st">"m"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Soft: keep remaining keys roughly like QWERTY</span></span>
<span>    <span class="fu"><a href="../reference/keep_like.html">keep_like</a></span><span class="op">(</span><span class="st">"qwerty"</span>, weight <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  generations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_layout.html">print_layout</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">layout</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span><span class="co">#&gt; │ W │ H │ G │ K │ O │ L │ P │ F │ J │ Y │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ R │ T │ Q │ A │ E │ D │ U │ S │ I │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ Z │ X │ C │ V │ B │ N │ M │</span></span>
<span><span class="co">#&gt; └───┴───┴───┴───┴───┴───┴───┘</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Fixed:"</span>, <span class="va">result</span><span class="op">$</span><span class="va">n_fixed</span>, <span class="st">"keys\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Fixed: 7 keys</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="balanced-multilingual-layout">Balanced Multilingual Layout<a class="anchor" aria-label="anchor" href="#balanced-multilingual-layout"></a>
</h3>
<p>Optimize for multiple languages with balanced hands:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"german"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"english"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_layout.html">optimize_layout</a></span><span class="op">(</span></span>
<span>  text_samples <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">french</span>, <span class="va">german</span>, <span class="va">english</span><span class="op">)</span>,</span>
<span>  rules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Keep shortcuts</span></span>
<span>    <span class="fu"><a href="../reference/fix_keys.html">fix_keys</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>, <span class="st">"v"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Strict hand balance for multilingual comfort</span></span>
<span>    <span class="fu"><a href="../reference/balance_hands.html">balance_hands</a></span><span class="op">(</span><span class="fl">0.5</span>, weight <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  generations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und die Erde war wüst und leer, und es war</span></span>
<span><span class="co">#&gt; finster auf der Tiefe; und der Geist Gottes schwebte auf dem Wasser.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott sah, daß das Licht gut war. Da</span></span>
<span><span class="co">#&gt; schied Gott das Licht von der Finsternis' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Da machte Gott die Feste und schied das</span></span>
<span><span class="co">#&gt; Wasser unter der Feste von dem Wasser über der Feste. Und es geschah also.'</span></span>
<span><span class="co">#&gt; cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott sprach: Es sammle sich das Wasser</span></span>
<span><span class="co">#&gt; unter dem Himmel an besondere Örter, daß man das Trockene sehe. Und es geschah</span></span>
<span><span class="co">#&gt; also.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott nannte das Trockene Erde, und die</span></span>
<span><span class="co">#&gt; Sammlung der Wasser nannte er Meer. Und Gott sah, daß es gut war.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott sprach: Es lasse die Erde</span></span>
<span><span class="co">#&gt; aufgehen Gras und Kraut, das sich besame, und fruchtbare Bäume, da ein</span></span>
<span><span class="co">#&gt; jeglicher nach seiner Art Frucht trage und habe seinen eigenen Samen bei sich</span></span>
<span><span class="co">#&gt; selbst auf Erden. Und es geschah also.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und die Erde ließ aufgehen Gras und Kraut,</span></span>
<span><span class="co">#&gt; das sich besamte, ein jegliches nach seiner Art, und Bäume, die da Frucht</span></span>
<span><span class="co">#&gt; trugen und ihren eigenen Samen bei sich selbst hatten, ein jeglicher nach</span></span>
<span><span class="co">#&gt; seiner Art. Und Gott sah, daß es gut war.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'und seien Lichter an der Feste des</span></span>
<span><span class="co">#&gt; Himmels, daß sie scheinen auf Erden. Und es geschah also.' cannot be translated</span></span>
<span><span class="co">#&gt; from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott machte zwei große Lichter: ein</span></span>
<span><span class="co">#&gt; großes Licht, das den Tag regiere, und ein kleines Licht, das die Nacht</span></span>
<span><span class="co">#&gt; regiere, dazu auch Sterne.' cannot be translated from 'ANSI_X3.4-1968' to</span></span>
<span><span class="co">#&gt; UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott setzte sie an die Feste des</span></span>
<span><span class="co">#&gt; Himmels, daß sie schienen auf die Erde' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'und den Tag und die Nacht regierten und</span></span>
<span><span class="co">#&gt; schieden Licht und Finsternis. Und Gott sah, daß es gut war.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott sprach: Es errege sich das Wasser</span></span>
<span><span class="co">#&gt; mit webenden und lebendigen Tieren, und Gevögel fliege auf Erden unter der</span></span>
<span><span class="co">#&gt; Feste des Himmels.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott schuf große Walfische und</span></span>
<span><span class="co">#&gt; allerlei Getier, daß da lebt und webt, davon das Wasser sich erregte, ein</span></span>
<span><span class="co">#&gt; jegliches nach seiner Art, und allerlei gefiedertes Gevögel, ein jegliches nach</span></span>
<span><span class="co">#&gt; seiner Art. Und Gott sah, daß es gut war.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott segnete sie und sprach: Seid</span></span>
<span><span class="co">#&gt; fruchtbar und mehrt euch und erfüllt das Wasser im Meer; und das Gefieder mehre</span></span>
<span><span class="co">#&gt; sich auf Erden.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Da ward aus Abend und Morgen der fünfte</span></span>
<span><span class="co">#&gt; Tag.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott sprach: Die Erde bringe hervor</span></span>
<span><span class="co">#&gt; lebendige Tiere, ein jegliches nach seiner Art: Vieh, Gewürm und Tiere auf</span></span>
<span><span class="co">#&gt; Erden, ein jegliches nach seiner Art. Und es geschah also.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott machte die Tiere auf Erden, ein</span></span>
<span><span class="co">#&gt; jegliches nach seiner Art, und das Vieh nach seiner Art, und allerlei Gewürm</span></span>
<span><span class="co">#&gt; auf Erden nach seiner Art. Und Gott sah, daß es gut war.' cannot be translated</span></span>
<span><span class="co">#&gt; from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott sprach: Laßt uns Menschen machen,</span></span>
<span><span class="co">#&gt; ein Bild, das uns gleich sei, die da herrschen über die Fische im Meer und über</span></span>
<span><span class="co">#&gt; die Vögel unter dem Himmel und über das Vieh und über die ganze Erde und über</span></span>
<span><span class="co">#&gt; alles Gewürm, das auf Erden kriecht.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott segnete sie und sprach zu ihnen:</span></span>
<span><span class="co">#&gt; Seid fruchtbar und mehrt euch und füllt die Erde und macht sie euch untertan</span></span>
<span><span class="co">#&gt; und herrscht über die Fische im Meer und über die Vögel unter dem Himmel und</span></span>
<span><span class="co">#&gt; über alles Getier, das auf Erden kriecht.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Und Gott sprach: Seht da, ich habe euch</span></span>
<span><span class="co">#&gt; gegeben allerlei Kraut, das sich besamt, auf der ganzen Erde und allerlei</span></span>
<span><span class="co">#&gt; fruchtbare Bäume, die sich besamen, zu eurer Speise,' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'und allem Getier auf Erden und allen</span></span>
<span><span class="co">#&gt; Vögeln unter dem Himmel und allem Gewürm, das da lebt auf Erden, daß sie</span></span>
<span><span class="co">#&gt; allerlei grünes Kraut essen. Und es geschah also.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Während des Bürgerkrieges und Völkermords</span></span>
<span><span class="co">#&gt; im nahe angrenzenden Ruanda 1994 war Goma eines der Hauptziele für Flüchtlinge.</span></span>
<span><span class="co">#&gt; Unter diesen waren nebst Zivilisten auch Mittäter des Genozids. Nachdem über</span></span>
<span><span class="co">#&gt; eine Million Flüchtlinge die Stadt erreicht hatten, brach in den Lagern eine</span></span>
<span><span class="co">#&gt; Cholera-Epidemie aus, die mehrere Tausend Opfer forderte. In den Jahren 1997</span></span>
<span><span class="co">#&gt; und 1998, als der Bürgerkrieg im Kongo nach dem Sturz von Präsident Mobutu Sese</span></span>
<span><span class="co">#&gt; Seko eskalierte, eroberten ruandische Regierungstruppen Goma. Im Zuge der</span></span>
<span><span class="co">#&gt; Verfolgung von Hutu, die in der Stadt Zuflucht gesucht hatten, töteten sie auch</span></span>
<span><span class="co">#&gt; Hunderte Unbeteiligte.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8,</span></span>
<span><span class="co">#&gt; but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Im Jahre 2002 wurde die Stadt von einem</span></span>
<span><span class="co">#&gt; Lavastrom aus dem etwa 14 km entfernten Nyiragongo im Norden zu großen Teilen</span></span>
<span><span class="co">#&gt; zerstört. Viele Gebäude gerade im Stadtzentrum sowie der Flughafen Goma waren</span></span>
<span><span class="co">#&gt; betroffen. Von den 3.000 Metern der Start- und Landebahn sind bis heute noch</span></span>
<span><span class="co">#&gt; fast 1.000 Meter unter einer Lavaschicht begraben, so dass der internationale</span></span>
<span><span class="co">#&gt; Verkehr ihn meidet. Rund 250.000 Einwohner der Stadt mussten flüchten. Es gab</span></span>
<span><span class="co">#&gt; 147 Todesopfer, viele Flüchtlinge blieben obdachlos oder haben sich am Rande</span></span>
<span><span class="co">#&gt; der Lavafelder Notunterkünfte gebaut. Seit April 2009 wird unter Führung der</span></span>
<span><span class="co">#&gt; Welthungerhilfe das Rollfeld des Flughafens von der Lava befreit. Die</span></span>
<span><span class="co">#&gt; Bedrohung, dass sich bei einer erneuten Eruption Lavamassen aus dem innerhalb</span></span>
<span><span class="co">#&gt; des Vulkankraters befindlichen Lavasee erneut ins Tal und auf die Stadt</span></span>
<span><span class="co">#&gt; ergießen, besteht nach wie vor.[3]' cannot be translated from 'ANSI_X3.4-1968'</span></span>
<span><span class="co">#&gt; to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Am 15. April 2008 raste nach dem Start vom</span></span>
<span><span class="co">#&gt; Flughafen Goma eine Douglas DC-9 mit 79 Passagieren und 6 Besatzungsmitgliedern</span></span>
<span><span class="co">#&gt; über das südliche Startbahnende hinaus in das Wohn- und Marktgebiet Birere.</span></span>
<span><span class="co">#&gt; Etwa 40 Personen aus dem angrenzenden Siedlungsgebiet kamen ums Leben,</span></span>
<span><span class="co">#&gt; mindestens 53 Passagiere und die 6 Besatzungsmitglieder überlebten jedoch. Das</span></span>
<span><span class="co">#&gt; Feuer aus dem brennenden Wrack konnte sich aufgrund des starken Regens nicht</span></span>
<span><span class="co">#&gt; ausbreiten, Anwohner konnten das Feuer zusätzlich eindämmen.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Am 21. November 2012 wurden große Teile</span></span>
<span><span class="co">#&gt; der Stadt von der gegen die Zentralregierung unter Präsident Joseph Kabila</span></span>
<span><span class="co">#&gt; kämpfenden Rebellenbewegung M23 eingenommen. Dort stationierte</span></span>
<span><span class="co">#&gt; UNO-Friedens-Truppen griffen im Gegensatz zu früheren Aktivitäten nicht mehr</span></span>
<span><span class="co">#&gt; ein.[5] Am 1. Dezember begannen sie nach Überschreitung eines Ultimatums der</span></span>
<span><span class="co">#&gt; Internationalen Konferenz der Großen Seen Afrikas und zwei Resolutionen des</span></span>
<span><span class="co">#&gt; UN-Sicherheitsrats, sich aus der Stadt zurückzuziehen.' cannot be translated</span></span>
<span><span class="co">#&gt; from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Im Jahre 2019 wurden mehrere Einzelfälle</span></span>
<span><span class="co">#&gt; von Ebola in der Stadt registriert, nachdem die Ebola Epidemie bereits zuvor im</span></span>
<span><span class="co">#&gt; Ostkongo ausgebrochen war.[6]' cannot be translated from 'ANSI_X3.4-1968' to</span></span>
<span><span class="co">#&gt; UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Seit 1959 ist Goma Sitz des</span></span>
<span><span class="co">#&gt; römisch-katholischen Bistums Goma.' cannot be translated from 'ANSI_X3.4-1968'</span></span>
<span><span class="co">#&gt; to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Die Transporteure werden Frachtführer (in</span></span>
<span><span class="co">#&gt; Österreich Frächter) genannt. Sie organisieren nicht den Transport, sondern</span></span>
<span><span class="co">#&gt; führen diesen aus, meistens im Auftrag eines Spediteurs. Die Höhe der Fracht</span></span>
<span><span class="co">#&gt; wird im Frachtvertrag vereinbart und in der Regel im Frachtbrief festgehalten.</span></span>
<span><span class="co">#&gt; Seit mit der Transportrechtsreform 1998 in Deutschland die Erstellung eines</span></span>
<span><span class="co">#&gt; Frachtbriefes für nationale Transporte nicht mehr zwingend erforderlich ist,</span></span>
<span><span class="co">#&gt; sondern auch Lieferscheine, Ladelisten oder vergleichbare Papiere als</span></span>
<span><span class="co">#&gt; Warenbegleitdokument verwendet werden können, wird zunehmend kein Frachtbrief</span></span>
<span><span class="co">#&gt; mehr ausgestellt. Beim Frachtbrief gibt es drei Originalausfertigungen. Eine</span></span>
<span><span class="co">#&gt; Ausfertigung verbleibt beim Absender, nachdem ihm darauf der Frachtführer die</span></span>
<span><span class="co">#&gt; Übernahme des Frachtguts bestätigt hat. Die zweite verbleibt nach Ablieferung</span></span>
<span><span class="co">#&gt; des Frachtguts als Ablieferbestätigung beim Frachtführer und die dritte erhält</span></span>
<span><span class="co">#&gt; der Empfänger.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is</span></span>
<span><span class="co">#&gt; valid UTF [... truncated]</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Für die Verladung des Frachtguts ist der</span></span>
<span><span class="co">#&gt; Absender zuständig. Er ist dabei gem. § 412 HGB für eine beförderungssichere</span></span>
<span><span class="co">#&gt; Verladung des Frachtguts verantwortlich, wohingegen der Frachtführer für die</span></span>
<span><span class="co">#&gt; verkehrssichere Verladung (z. B. Gewichtsverteilung, Einhaltung der zulässigen</span></span>
<span><span class="co">#&gt; Achslasten), als auch für die Ladungssicherung zu sorgen hat.' cannot be</span></span>
<span><span class="co">#&gt; translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Bei Kontrollen muss der Frachtbrief den</span></span>
<span><span class="co">#&gt; Zoll- und Polizeibehörden, sowie dem Bundesamt für Güterverkehr (BAG)</span></span>
<span><span class="co">#&gt; ausgehändigt werden.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but</span></span>
<span><span class="co">#&gt; is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Es gibt anmeldepflichtige Frachtgüter, für</span></span>
<span><span class="co">#&gt; deren Transport es einer ausdrücklichen behördlichen Genehmigung bedarf.</span></span>
<span><span class="co">#&gt; Schwertransporte erfordern eine behördliche Ausnahmegenehmigung und bei</span></span>
<span><span class="co">#&gt; Überschreiten bestimmter Abmessungen sind gemäß § 29 Absatz. 3 StVO (Übermäßige</span></span>
<span><span class="co">#&gt; Straßennutzung) definitiv Begleitfahrzeuge und/oder eine Begleitung durch die</span></span>
<span><span class="co">#&gt; Polizei vorgeschrieben, um Sicherungsmaßnahmen einzuleiten und für einen</span></span>
<span><span class="co">#&gt; reibungslosen Ablauf zu sorgen. Fällt das zu befördernde Frachtgut unter die</span></span>
<span><span class="co">#&gt; Gefahrgutverordnung, muss das Transportfahrzeug neben der Einhaltung</span></span>
<span><span class="co">#&gt; gefahrgutrelevanter Vorschriften auch mit entsprechenden Warntafeln</span></span>
<span><span class="co">#&gt; gekennzeichnet sein. Darüber hinaus benötigt dann der Fahrzeugführer und ein</span></span>
<span><span class="co">#&gt; eventueller Beifahrer auch eine ADR-Bescheinigung.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Die Aufteilung der Frachtkosten zwischen</span></span>
<span><span class="co">#&gt; Absender und Empfänger wird über die im Kaufvertrag festgehaltenen</span></span>
<span><span class="co">#&gt; Lieferbedingungen geregelt, im internationalen Warenverkehr durch die</span></span>
<span><span class="co">#&gt; Incoterms.' cannot be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid</span></span>
<span><span class="co">#&gt; UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'In 1996, Wales and two partners founded</span></span>
<span><span class="co">#&gt; Bomis, a web portal primarily known for featuring adult content. Bomis provided</span></span>
<span><span class="co">#&gt; the initial funding for the free peer-reviewed encyclopedia Nupedia</span></span>
<span><span class="co">#&gt; (2000–2003). On January 15, 2001, with Larry Sanger and others, Wales launched</span></span>
<span><span class="co">#&gt; Wikipedia, a free open-content encyclopedia that enjoyed rapid growth and</span></span>
<span><span class="co">#&gt; popularity. As its public profile grew, Wales became its promoter and</span></span>
<span><span class="co">#&gt; spokesman. Though he is historically credited as co-founder, he has disputed</span></span>
<span><span class="co">#&gt; this, declaring himself the sole founder.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Jesus is also revered in other religions.</span></span>
<span><span class="co">#&gt; In Islam, Jesus (often referred to by his Quranic name ʿĪsā) is considered the</span></span>
<span><span class="co">#&gt; penultimate prophet of God and the messiah, who will return before the Day of</span></span>
<span><span class="co">#&gt; Judgement. Muslims believe Jesus was born of the virgin Mary (another figure</span></span>
<span><span class="co">#&gt; revered in Islam), but was neither God nor a son of God; In contrast, Judaism</span></span>
<span><span class="co">#&gt; rejects the belief that Jesus was the awaited messiah, arguing that he did not</span></span>
<span><span class="co">#&gt; fulfill messianic prophecies, and was neither divine nor resurrected.' cannot</span></span>
<span><span class="co">#&gt; be translated from 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Formal unification of Germany into the</span></span>
<span><span class="co">#&gt; modern nation-state was commenced on 18 August 1866 with the North German</span></span>
<span><span class="co">#&gt; Confederation Treaty establishing the Prussia-led North German Confederation</span></span>
<span><span class="co">#&gt; later transformed in 1871 into the German Empire. After World War I and the</span></span>
<span><span class="co">#&gt; German Revolution of 1918–1919, the Empire was in turn transformed into the</span></span>
<span><span class="co">#&gt; semi-presidential Weimar Republic. The Nazi seizure of power in 1933 led to the</span></span>
<span><span class="co">#&gt; establishment of a totalitarian dictatorship, World War II, and the Holocaust.</span></span>
<span><span class="co">#&gt; After the end of World War II in Europe and a period of Allied occupation, in</span></span>
<span><span class="co">#&gt; 1949, Germany as a whole was organized into two separate polities with limited</span></span>
<span><span class="co">#&gt; sovereignity: the Federal Republic of Germany, generally known as West Germany,</span></span>
<span><span class="co">#&gt; and the German Democratic Republic, East Germany, while Berlin de jure</span></span>
<span><span class="co">#&gt; continued its Four Power status. The Federal Republic of Germany was a founding</span></span>
<span><span class="co">#&gt; member of the European Economic Community and the European Union, while the</span></span>
<span><span class="co">#&gt; German Democratic R [... truncated]</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Over the centuries, the City and Fortress</span></span>
<span><span class="co">#&gt; of Luxembourg—of great strategic importance due to its location between the</span></span>
<span><span class="co">#&gt; Kingdom of France and the Habsburg territories—was gradually built up to be one</span></span>
<span><span class="co">#&gt; of the most reputed fortifications in Europe. ' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'Geometrically, this is seen as the sum of</span></span>
<span><span class="co">#&gt; the squared distances, parallel to the axis of the dependent variable, between</span></span>
<span><span class="co">#&gt; each data point in the set and the corresponding point on the regression</span></span>
<span><span class="co">#&gt; surface—the smaller the differences, the better the model fits the data. The</span></span>
<span><span class="co">#&gt; resulting estimator can be expressed by a simple formula, especially in the</span></span>
<span><span class="co">#&gt; case of a simple linear regression, in which there is a single regressor on the</span></span>
<span><span class="co">#&gt; right side of the regression equation.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span>
<span><span class="co">#&gt; Warning in optimize_layout(text_samples = c(french, german, english), rules =</span></span>
<span><span class="co">#&gt; list(fix_keys(c("z", : input string 'The OLS estimator is consistent for the</span></span>
<span><span class="co">#&gt; level-one fixed effects when the regressors are exogenous and forms perfect</span></span>
<span><span class="co">#&gt; colinearity (rank condition), consistent for the variance estimate of the</span></span>
<span><span class="co">#&gt; residuals when regressors have finite fourth moments and—by the Gauss–Markov</span></span>
<span><span class="co">#&gt; theorem—optimal in the class of linear unbiased estimators when the errors are</span></span>
<span><span class="co">#&gt; homoscedastic and serially uncorrelated. Under these conditions, the method of</span></span>
<span><span class="co">#&gt; OLS provides minimum-variance mean-unbiased estimation when the errors have</span></span>
<span><span class="co">#&gt; finite variances. Under the additional assumption that the errors are normally</span></span>
<span><span class="co">#&gt; distributed with zero mean, OLS is the maximum likelihood estimator that</span></span>
<span><span class="co">#&gt; outperforms any non-linear unbiased estimator.' cannot be translated from</span></span>
<span><span class="co">#&gt; 'ANSI_X3.4-1968' to UTF-8, but is valid UTF-8</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_layout.html">print_layout</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">layout</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span><span class="co">#&gt; │ Q │ J │ G │ L │ Y │ K │ D │ U │ B │ P │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ M │ T │ N │ R │ E │ S │ A │ I │ O │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ Z │ X │ C │ V │ W │ H │ F │</span></span>
<span><span class="co">#&gt; └───┴───┴───┴───┴───┴───┴───┘</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="comparison-with-vs-without-rules">Comparison: With vs Without Rules<a class="anchor" aria-label="anchor" href="#comparison-with-vs-without-rules"></a>
</h2>
<p>Let’s compare optimization results:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Without rules</span></span>
<span><span class="va">result_plain</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_layout.html">optimize_layout</a></span><span class="op">(</span></span>
<span>  text_samples <span class="op">=</span> <span class="va">french</span>,</span>
<span>  generations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With rules</span></span>
<span><span class="va">result_rules</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_layout.html">optimize_layout</a></span><span class="op">(</span></span>
<span>  text_samples <span class="op">=</span> <span class="va">french</span>,</span>
<span>  rules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/fix_keys.html">fix_keys</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>, <span class="st">"v"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/prefer_hand.html">prefer_hand</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"e"</span>, <span class="st">"i"</span>, <span class="st">"o"</span>, <span class="st">"u"</span><span class="op">)</span>, <span class="st">"left"</span>, weight <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  generations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Without rules - Effort:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_plain</span><span class="op">$</span><span class="va">effort</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Without rules - Effort: 35285.7</span></span>
<span><span class="fu"><a href="../reference/print_layout.html">print_layout</a></span><span class="op">(</span><span class="va">result_plain</span><span class="op">$</span><span class="va">layout</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span><span class="co">#&gt; │ F │ Y │ D │ Z │ R │ I │ U │ V │ J │ P │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ C │ T │ S │ M │ L │ E │ A │ O │ N │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ X │ B │ W │ Q │ K │ H │ G │</span></span>
<span><span class="co">#&gt; └───┴───┴───┴───┴───┴───┴───┘</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nWith rules - Effort:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_rules</span><span class="op">$</span><span class="va">effort</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; With rules - Effort: 40641.18</span></span>
<span><span class="fu"><a href="../reference/print_layout.html">print_layout</a></span><span class="op">(</span><span class="va">result_rules</span><span class="op">$</span><span class="va">layout</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐</span></span>
<span><span class="co">#&gt; │ A │ G │ O │ Q │ R │ D │ L │ W │ K │ F │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ U │ E │ I │ J │ S │ N │ P │ T │ M │</span></span>
<span><span class="co">#&gt; ├───┼───┼───┼───┼───┼───┼───┘</span></span>
<span><span class="co">#&gt; │ Z │ X │ C │ V │ Y │ B │ H │</span></span>
<span><span class="co">#&gt; └───┴───┴───┴───┴───┴───┴───┘</span></span></code></pre></div>
<p>The layout with rules might have slightly higher effort, but it
respects your preferences and constraints.</p>
</div>
<div class="section level2">
<h2 id="rule-reference">Rule Reference<a class="anchor" aria-label="anchor" href="#rule-reference"></a>
</h2>
<table class="table">
<colgroup>
<col width="28%">
<col width="34%">
<col width="37%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Parameters</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>fix_keys(keys)</code></td>
<td>keys: character vector</td>
<td>Hard constraint - keys don’t move</td>
</tr>
<tr class="even">
<td><code>prefer_hand(keys, hand, weight)</code></td>
<td>hand: “left”/“right”</td>
<td>Soft penalty for wrong hand</td>
</tr>
<tr class="odd">
<td><code>prefer_row(keys, row, weight)</code></td>
<td>row: 1, 2, or 3</td>
<td>Soft penalty for wrong row</td>
</tr>
<tr class="even">
<td><code>prefer_finger(keys, fingers, weight)</code></td>
<td>fingers: 0-9</td>
<td>Soft penalty for wrong finger</td>
</tr>
<tr class="odd">
<td><code>balance_hands(target, weight)</code></td>
<td>target: 0-1</td>
<td>Soft penalty for hand imbalance</td>
</tr>
<tr class="even">
<td><code>keep_like(ref, keys, weight)</code></td>
<td>ref: “qwerty” or vector</td>
<td>Soft penalty for layout mismatch</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Rodrigues.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
